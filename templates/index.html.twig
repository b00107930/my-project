
<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Multi-page template</title>

<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
<script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>



</head>

<body>

<!-- Start of first page: #one -->
<div data-role="page" id="one">

	<div data-role="header">
		<h1>Multi-page</h1>
	</div><!-- /header -->

	<div role="main" class="ui-content">
		<h2>Welcome!</h2>

		<br>
        Welcome to the Pizza Shop, login or register.

		<h3>Show internal pages:</h3>
		<p><a href="#register" class="ui-btn ui-shadow ui-corner-all">Register</a></p>
		<p><a href="#login" class="ui-btn ui-shadow ui-corner-all">Login</a></p>

	</div><!-- /content -->

	<div data-role="footer" data-theme="a">
		<h4>Page Footer</h4>
	</div><!-- /footer -->
</div><!-- /page one -->

<!-- Start of second page: #two -->
<div data-role="page" id="two" data-theme="a">

	<div data-role="header">
		<h1>Two</h1>
	</div><!-- /header -->

	<div role="main" class="ui-content">
		<h2>Two</h2>
		<p>I have an id of "two" on my page container. I'm the second page container in this multi-page template.</p>
		<p>Notice that the theme is different for this page because we've added a few <code>data-theme</code> swatch assigments here to show off how flexible it is. You can add any content or widget to these pages, but we're keeping these simple.</p>
		<p><a href="#one" data-direction="reverse" class="ui-btn ui-shadow ui-corner-all ui-btn-b">Back to page "one"</a></p>

	</div><!-- /content -->

	<div data-role="footer">
		<h4>Page Footer</h4>
	</div><!-- /footer -->
</div><!-- /page two -->

<!-- Start of third page: #popup -->
<div data-role="page" id="popup">

	<div data-role="header" data-theme="b">
		<h1>Dialog</h1>
	</div><!-- /header -->

	<div role="main" class="ui-content">
		<h2>Popup</h2>
		<p>I have an id of "popup" on my page container and only look like a dialog because the link to me had a <code>data-rel="dialog"</code> attribute which gives me this inset look and a <code>data-transition="pop"</code> attribute to change the transition to pop. Without this, I'd be styled as a normal page.</p>
		<p><a href="#one" data-rel="back" class="ui-btn ui-shadow ui-corner-all ui-btn-inline ui-icon-back ui-btn-icon-left">Back to page "one"</a></p>
	</div><!-- /content -->

	<div data-role="footer">
		<h4>Page Footer</h4>
	</div><!-- /footer -->
</div><!-- /page popup -->



<div data-role="page" id="login" data-theme="a">
<div data-role="header">
		<h1>Login page</h1>
	</div><!-- /header -->

<div role="main" class="ui-content">
		<h2>Login</h2>
       Username <input type="text" name="login_username" id="login_username" value="">
       Password <input type="text" name="login_pass" id="login_pass" value="">
	   <button class="ui-btn" id="loginButton">Login</button>

	</div><!-- /content -->


</div>

<div data-role="page" id="register" data-theme="a">

<div data-role="header">
		<h1>Register</h1>
	</div><!-- /header -->

<div role="main" class="ui-content">
		<h2>Register</h2>
        
       Username <input type="text" name="username" id="username" value="">
       Password <input type="text" name="pass" id="pass" value="">
	   Account Type <input type="text" name="acctype" id="acctype" value="">
       <button class="ui-btn" id="registerButton">Submit</button>
	

	</div><!-- /content -->
</div>



<div data-role="page" id="customer" data-theme="a">

<div data-role="header">
		<h1>Customer Page</h1>

		</div><!-- /header -->

<div role="main" class="ui-content">


<script>
// template for a product

class product {
  constructor(name, price, qty) {
    this.name = name
    this.price = price;
    this.qty = qty;
  }
}


// define our products
cookies = new product("cookies", 3.50, 0);

pizza = new product("pizza", 10.50, 0);

bbq = new product("bbq", 10.50, 0);

hawaiiian = new product("hawaiiian", 10.50, 0);

NewYorker = new product("ny", 10.50, 0);



var prod = []; // array

prod.push(cookies);
prod.push(pizza);
prod.push(bbq);
prod.push(hawaiiian);
prod.push(NewYorker);

</script>


Add some cookies.. <button id="addProduct1" productname="cookies">Add me</button> 
                    <button id="removeProduct1" productname="cookies">Remove</button>
                    <input type="text" id="cookiesQty"/>    

                    <p>
                    
bbq Pizza         <button id="addProduct2" productname="bbq">Add me</button> 
                    <button id="removeProduct2" productname="bbq">Remove</button>
                    <input type="text" id="bbqQty"/>    
                    

                    
                    <p>
Hawaiian        <button id="addProduct3" productname="hawaiiian">Add me</button> 
                    <button id="removeProduct3" productname="hawaiiian">Remove</button>
                    <input type="text" id="hawaiiianQty"/>    
                    

                    
                    <p>
New Yorker        <button id="addProduct4" productname="ny">Add me</button> 
                    <button id="removeProduct4" productname="ny">Remove</button>
                    <input type="text" id="nyQty"/>    
                    

                    
                    <p>

<form method = "post" id = "login-form" align = "center">



	 <table align="center">

	 <tr><td><input type="text" name="phone" placeholder="Enter Phone Number" value="" /></td></tr>
	 <tr><td><input type="text" name="address" placeholder="Enter Address" value="" /></td></tr>
	 <tr><td><button class="ui-btn" id="orderButton">Place Order</button></td></tr>
	 </table>
	 </fieldset>
	 </form>


<script>

$('[id^=removeProduct').click(function(){

console.log("being called");

   var p = $(this).attr('productname');
   
  
   
    var arrayLength = prod.length;
    for (var i = 0; i < arrayLength; i++) { // loop over the products
        
        var pro = prod[i] // get one product at a time
        console.log(pro.name);
        
        if(p == pro.name) { // check if the product we are looking for is the one we have.
        
            console.log(pro.qty);
            
            pro.qty = pro.qty - 1; // add one onto the qty
            console.log(pro.qty);
              $( "#"+pro.name+"Qty" ).val(pro.qty); // if we looking for cookies, pro.name+Qty becomes, cookiesQty

        }
        //Do something
            
    }
   
   
});


    
$('[id^=addProduct').click(function(){


    var p = $(this).attr('productname'); // find out what was clicked


    
    var arrayLength = prod.length;
    for (var i = 0; i < arrayLength; i++) { // loop over the products
        
        var pro = prod[i] // get one product at a time
        console.log(pro.name);
        
        if(p == pro.name) { // check if the product we are looking for is the one we have.
        
            console.log(pro.qty);
            
            pro.qty = pro.qty + 1; // add one onto the qty
            
              $( "#"+pro.name+"Qty" ).val(pro.qty); // if we looking for cookies, pro.name+Qty becomes, cookiesQty

        }
        //Do something
            
    }
    
    
});




function checkout(){

console.log("in checkout");
    var ser = '';

     var arrayLength = prod.length;
     
        for (var i = 0; i < arrayLength; i++) { // loop over the products
            
            var pro = prod[i] // get one product at a time
            console.log(pro.name);
            console.log(pro.qty);
            
            ser = ser + pro.name + '-' + pro.qty + '=';
            
          
         }
    
    // jQuery post and send the ser.

    $.post( "/catchTheCart", { placedby: "Thomas", ser: ser })
      .done(function( data ) {
        alert( "Data Loaded: " + data );
      });


console.log(ser);
}

</script>
<button onclick="checkout()"/>Checkout</button>

</div>


</div>


// driver page
<div data-role="page" id="driver" data-theme="a">

<div data-role="header">
		<h1>Driver's Page</h1>
	</div><!-- /header -->

<div role="main" class="ui-content">
		<h2>Current Orders</h2>
		
		
		<h2>Weather</h2>
		<div class = "weatherResponse">
		
		
		
		</div>
		
		
		
		<script>
		
         var apiCall = 'http://api.openweathermap.org/data/2.5/weather?q=dublin,ie&APPID=0c674e9d053bd224529b9f96f8e71ee8' ;
		 
		 $.getJSON(apiCall, weatherCallback);
		 
		 function weatherCallback(weatherData){
		 var cityName = weatherData.name;
		 var country = weatherData.sys.country;
		 var description = weatherData.weather[0].description;
		 
		 $('.weatherResponse').append("The weather in " + cityName + " " + country +" is currently " + description);
		 }

        </script>


	</div><!-- /content -->
</div>


<div data-role="page" id="manager" data-theme="a">

<div data-role="header">
		<h1>Manager's Page</h1>
	</div><!-- /header -->

<div role="main" class="ui-content">
		<h2>Manager</h2>
        


	</div><!-- /content -->
</div>



</body>

<script>


$ ("#loginButton").click(function() {

var un = $("#login_username").val();
console.log(un);

var pw = $("#login_pass").val();
console.log(pw);



$.post( "/backend", { type: "login", username:un, password:pw})
  .done(function( data ) {
    alert( "Data Loaded: " + data );
	
	    if(data == 'customer'){
            window.location="/index#customer";
        }
        else if(data == 'driver'){
            window.location="/index#driver";
        }  
		else if(data == 'manager'){
            window.location="/index#manager";
        } 
  });

});

$ ("#registerButton").click(function() {

var un = $("#username").val();
console.log(un);

var pw = $("#pass").val();
console.log(pw);

var at = $("#acctype").val();
console.log(acctype);



$.post( "/backend", { type: "register", username:un, password:pw, acctype:at})
  .done(function( data ) {
    alert( "Data Loaded: " + data );
  });




});

</script>





  
</html>
